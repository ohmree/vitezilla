import{_ as u,W as h,X as k,Z as s,a1 as e,$ as a,a0 as n,a2 as r,E as p}from"./framework-72c45ff9.js";const m={},v=s("h1",{id:"setup",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#setup","aria-hidden":"true"},"#"),e(" Setup")],-1),g=s("h2",{id:"requirements",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#requirements","aria-hidden":"true"},"#"),e(" Requirements")],-1),b={href:"https://github.com/mozilla/webextension-polyfill",target:"_blank",rel:"noopener noreferrer"},_=s("code",null,"webextension-polyfill",-1),f={href:"https://github.com/lusito/webextension-polyfill-ts",target:"_blank",rel:"noopener noreferrer"},y=s("code",null,"@types/webextension-polyfill",-1),x={href:"/core",target:"_blank",rel:"noopener noreferrer"},w=s("code",null,"vitezilla",-1),q=s("code",null,"deep-mock",-1),A=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"pnpm"),e(" i "),s("span",{class:"token parameter variable"},"-D"),e(" @vitezilla/webextension")])]),e(`
`)])])],-1),$=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"yarn"),e(),s("span",{class:"token function"},"add"),e(),s("span",{class:"token parameter variable"},"-D"),e(" @vitezilla/webextension")])]),e(`
`)])])],-1),z=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"npm"),e(" i "),s("span",{class:"token parameter variable"},"-D"),e(" @vitezilla/webextension")])]),e(`
`)])])],-1),V=s("h2",{id:"vitest",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#vitest","aria-hidden":"true"},"#"),e(" Vitest")],-1),C=s("code",null,"vitezilla",-1),j=s("code",null,"@vitezilla/webextension",-1),D={href:"https://vitest.dev/",target:"_blank",rel:"noopener noreferrer"},T=s("p",null,[e("Here's a quick setup guide for Vitest with TypeScript and "),s("code",null,"@vitezilla/webextension"),e(":")],-1),E=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"pnpm"),e(" i "),s("span",{class:"token parameter variable"},"-D"),e(" vitest")])]),e(`
`)])])],-1),N=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"yarn"),e(),s("span",{class:"token function"},"add"),e(),s("span",{class:"token parameter variable"},"-D"),e(" vitest")])]),e(`
`)])])],-1),I=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"npm"),e(" i "),s("span",{class:"token parameter variable"},"-D"),e(" vitest")])]),e(`
`)])])],-1),L=r(`<p>Create a file <code>vitest.config.ts</code> or append to your existing <code>vite.config.ts</code> file:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">/// &lt;reference types=&quot;vitest&quot; /&gt;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token punctuation">{</span>
    setupFiles<span class="token operator">:</span> <span class="token string">&#39;vitest.setup.ts&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),B={class:"hint-container tip"},R=s("p",{class:"hint-container-title"},"Tips",-1),S={href:"https://vitejs.dev/guide/api-javascript.html#mergeconfig",target:"_blank",rel:"noopener noreferrer"},Y=s("code",null,"mergeConfig",-1),F=r(`<p>Add test scripts to your <code>package.json</code>:</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitest run&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;test:watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitest watch&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In order to setup <code>afterEach</code> callbacks and mock <code>webextension-polyfill</code> you&#39;ll need to create a setup file (e.g. <code>vitest.setup.ts</code>):</p><div class="language-typescript" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token string">&#39;@vitezilla/webextension/setup&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p>Now all you need to do is write test files and run the tests:</p>`,5),H=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"pnpm"),e(),s("span",{class:"token builtin class-name"},"test")])]),e(`
`)])])],-1),W=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"yarn"),e(),s("span",{class:"token builtin class-name"},"test")])]),e(`
`)])])],-1),X=s("div",{class:"language-shellsession","data-ext":"shellsession"},[s("pre",{class:"language-shellsession"},[s("code",null,[s("span",{class:"token command"},[s("span",{class:"token shell-symbol important"},"$"),e(),s("span",{class:"token bash language-bash"},[s("span",{class:"token function"},"npm"),e(),s("span",{class:"token builtin class-name"},"test")])]),e(`
`)])])],-1);function Z(G,J){const i=p("ExternalLinkIcon"),d=p("RouterLink"),c=p("CodeTabs");return h(),k("div",null,[v,g,s("p",null,[e("You need to be using "),s("a",b,[_,a(i)]),e(" and "),s("a",f,[y,a(i)]),e(" in your webextension for this project to work.")]),s("p",null,[e("If you don't want to use the above in your webextension, you might want to take a look at "),s("a",x,[w,a(i)]),e(" instead and find a custom solution. Take a look at the "),a(d,{to:"/core/deep-mock.html"},{default:n(()=>[q]),_:1}),e(" documentation to get an idea.")]),a(c,{id:"12",data:[{title:"pnpm"},{title:"yarn"},{title:"npm"}],"tab-id":"shell"},{tab0:n(({title:t,value:o,isActive:l})=>[A]),tab1:n(({title:t,value:o,isActive:l})=>[$]),tab2:n(({title:t,value:o,isActive:l})=>[z]),_:1}),V,s("p",null,[e("Aside from "),C,e(" and "),j,e(" themselves, you'll only need "),s("a",D,[e("Vitest"),a(i)]),e(".")]),T,a(c,{id:"32",data:[{title:"pnpm"},{title:"yarn"},{title:"npm"}],"tab-id":"shell"},{tab0:n(({title:t,value:o,isActive:l})=>[E]),tab1:n(({title:t,value:o,isActive:l})=>[N]),tab2:n(({title:t,value:o,isActive:l})=>[I]),_:1}),L,s("div",B,[R,s("p",null,[e("You might need to use Vite's "),s("a",S,[Y,a(i)]),e(" helper if you create a separate config for Vitest and would like to share some of the options between the two.")])]),F,a(c,{id:"63",data:[{title:"pnpm"},{title:"yarn"},{title:"npm"}],"tab-id":"shell"},{tab0:n(({title:t,value:o,isActive:l})=>[H]),tab1:n(({title:t,value:o,isActive:l})=>[W]),tab2:n(({title:t,value:o,isActive:l})=>[X]),_:1})])}const M=u(m,[["render",Z],["__file","setup.html.vue"]]);export{M as default};
