import{_ as l,W as p,X as u,$ as a,a0 as e,a2 as r,Z as s,a1 as n,E as d}from"./framework-72c45ff9.js";const k={},m=r('<h1 id="utilities" tabindex="-1"><a class="header-anchor" href="#utilities" aria-hidden="true">#</a> Utilities</h1><h2 id="problem" tabindex="-1"><a class="header-anchor" href="#problem" aria-hidden="true">#</a> Problem</h2><p>You want to ensure your code has no side-effects.</p><h2 id="solution-1-deny-property-access" tabindex="-1"><a class="header-anchor" href="#solution-1-deny-property-access" aria-hidden="true">#</a> Solution 1: Deny Property Access</h2><p><code>denyPropertyAccess&lt;T&gt;(instance: T, property: string)</code></p><p>Use this if you want to verify, that a specified property will not get accessed during the test:</p>',6),h=s("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[s("pre",{class:"language-typescript"},[s("code",null,[s("span",{class:"token keyword"},"import"),n(),s("span",{class:"token punctuation"},"{"),n(" denyPropertyAccess "),s("span",{class:"token punctuation"},"}"),n(),s("span",{class:"token keyword"},"from"),n(),s("span",{class:"token string"},"'vitezilla'"),s("span",{class:"token punctuation"},";"),n(`
`),s("span",{class:"token keyword"},"import"),n(),s("span",{class:"token punctuation"},"{"),n(" test "),s("span",{class:"token punctuation"},"}"),n(),s("span",{class:"token keyword"},"from"),n(),s("span",{class:"token string"},"'vitest'"),s("span",{class:"token punctuation"},";"),n(`

`),s("span",{class:"token function"},"test"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'modifiedDate will not be touched'"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token operator"},"=>"),n(),s("span",{class:"token punctuation"},"{"),n(`
  `),s("span",{class:"token keyword"},"const"),n(" myInstance "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token keyword"},"new"),n(),s("span",{class:"token class-name"},"MyClass"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
  `),s("span",{class:"token function"},"denyPropertyAccess"),s("span",{class:"token punctuation"},"("),n("myInstance"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token string"},"'modifiedDate'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
  myInstance`),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"run"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
  `),s("span",{class:"token comment"},"// If we got here, it means modifiedDate was not touched!"),n(`
`),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),y=s("h2",{id:"solution-2-whitelist-property-access",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#solution-2-whitelist-property-access","aria-hidden":"true"},"#"),n(" Solution 2: Whitelist Property Access")],-1),b=s("p",null,[s("code",null,"whitelistPropertyAccess(instance: any, ...whitelist: string[])")],-1),v=s("p",null,[n("This can be used to call "),s("code",null,"denyPropertyAccess"),n(" on all properties except the ones in the whitelist:")],-1),f=s("div",{class:"language-typescript line-numbers-mode","data-ext":"ts"},[s("pre",{class:"language-typescript"},[s("code",null,[s("span",{class:"token keyword"},"import"),n(),s("span",{class:"token punctuation"},"{"),n(" whitelistPropertyAccess "),s("span",{class:"token punctuation"},"}"),n(),s("span",{class:"token keyword"},"from"),n(),s("span",{class:"token string"},"'vitezilla'"),s("span",{class:"token punctuation"},";"),n(`
`),s("span",{class:"token keyword"},"import"),n(),s("span",{class:"token punctuation"},"{"),n(" test "),s("span",{class:"token punctuation"},"}"),n(),s("span",{class:"token keyword"},"from"),n(),s("span",{class:"token string"},"'vitest'"),s("span",{class:"token punctuation"},";"),n(`

`),s("span",{class:"token function"},"test"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'only tasks and showNotifiations may be touched'"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token operator"},"=>"),n(),s("span",{class:"token punctuation"},"{"),n(`
  `),s("span",{class:"token keyword"},"const"),n(" myInstance "),s("span",{class:"token operator"},"="),n(),s("span",{class:"token keyword"},"new"),n(),s("span",{class:"token class-name"},"MyClass"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
  `),s("span",{class:"token function"},"whitelistPropertyAccess"),s("span",{class:"token punctuation"},"("),n("myInstance"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token string"},"'run'"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token string"},"'tasks'"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token string"},"'showNotification'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
  myInstance`),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"run"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
  `),s("span",{class:"token comment"},"// If we got here, it means no other properties than the ones specified above have been touched!"),n(`
`),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1);function w(_,g){const t=d("CodeTabs");return p(),u("div",null,[m,a(t,{id:"18",data:[{title:"some.spec.ts"}]},{tab0:e(({title:o,value:c,isActive:i})=>[h]),_:1},8,["data"]),y,b,v,a(t,{id:"32",data:[{title:"some.spec.ts"}]},{tab0:e(({title:o,value:c,isActive:i})=>[f]),_:1},8,["data"])])}const A=l(k,[["render",w],["__file","utils.html.vue"]]);export{A as default};
